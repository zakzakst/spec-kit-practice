---
description: "GitHub Copilot 用の高品質なプロンプトファイルを作成するためのガイドライン"
applyTo: "**/*.prompt.md"
---

# Copilot プロンプトファイルのガイドライン

あらゆるリポジトリで一貫した高品質の結果を提供できるように GitHub Copilot をガイドする、効果的で保守可能なプロンプト ファイルを作成する手順。

## 範囲と原則

- 対象者: Copilot Chat の再利用可能なプロンプトを作成するメンテナーと貢献者。
- 目標: 予測可能な動作、明確な期待、最小限の権限、リポジトリ間の移植性。
- 主な参考資料: プロンプト ファイルと組織固有の規則に関する VS Code ドキュメント。

## 前書きの要件

すべてのプロンプト ファイルには、次のフィールドを含む YAML フロントマターが含まれている必要があります。

### Required/Recommended Fields

| フィールド      | 必須 | 説明                                                                                                       |
| --------------- | ---- | ---------------------------------------------------------------------------------------------------------- |
| `description`   | 推奨 | プロンプトの簡単な説明（1文、実行可能な結果）                                                              |
| `name`          | 任意 | チャットで「/」を入力した後に表示される名前。指定されていない場合はファイル名がデフォルトになります。      |
| `agent`         | 推奨 | 使用するエージェント: `ask`、`edit`、`agent`、またはカスタムエージェント名。デフォルトは現在のエージェント |
| `model`         | 任意 | 使用する言語モデル。デフォルトは現在選択されているモデルです。                                             |
| `tools`         | 任意 | このプロンプトで使用できるツール/ツールセット名のリスト                                                    |
| `argument-hint` | 任意 | チャット入力時にユーザーインタラクションをガイドするためのヒントテキストが表示されます                     |

### ガイドライン

- 読みやすさとバージョン管理の明確さを保つために、一貫した引用符（一重引用符を推奨）を使用し、1 行につき 1 つのフィールドを維持します。
- `tools` が指定されていて、現在のエージェントが `ask` または `edit` の場合、デフォルトのエージェントは `agent` になります。
- 組織で必要な追加のメタデータ（`language`, `tags`, `visibility`など）を保存します

## ファイルの命名と配置

- ワークスペース標準で別のディレクトリが指定されていない限り、`.prompt.md` で終わるケバブケースのファイル名を使用し、`.github/prompts/` の下に保存します。
- アクションを伝える短いファイル名を指定します (たとえば、`prompt1.prompt.md` ではなく `generate-readme.prompt.md`)。

## 内容の構造

- プロンプトの意図に一致する `#` レベルの見出しから始めると、クイックピック検索で適切に表示されます。
- コンテンツを予測可能なセクションで構成します。推奨されるベースラインは、「ミッション」または「主要指令」、「スコープと前提条件」、「入力」、「ワークフロー」（ステップバイステップ）、「出力の期待値」、「品質保証」です。
- セクション名はドメインに合わせて調整しますが、論理的な流れを維持します: 理由 → コンテキスト → 入力 → アクション → 出力 → 検証。
- 発見しやすくするために、相対リンクを使用して関連するプロンプトまたは説明ファイルを参照します。

## 入力とコンテキスト処理

- 必須値には `${input:variableName[:placeholder]}` を使用し、ユーザーが入力しなければならない場合について説明します。可能な場合は、デフォルト値または代替値を提供してください。
- `${selection}`、`${file}`、`${workspaceFolder}` などのコンテキスト変数は、必要な場合にのみ呼び出し、Copilot がそれらをどのように解釈するかを説明します。
- 必須のコンテキストが欠落している場合の続行方法を文書化します (たとえば、「ファイル パスを要求し、未定義のままの場合は停止する」)。

## ツールと権限のガイダンス

- `tools` は、タスクを実行できる最小限のツールセットに限定してください。順序が重要な場合は、優先実行順にリストしてください。
- プロンプトがチャット モードからツールを継承する場合は、その関係について言及し、重要なツールの動作や副作用を述べます。
- 破壊的な操作 (ファイルの作成、編集、ターミナル コマンド) について警告し、ワークフローにガードレールまたは確認手順を含めます。

## 指導のトーンとスタイル

- Copilot を対象とした直接的で命令形の文章で記述します (例:「分析する」、「生成する」、「要約する」)。
- ローカリゼーションをサポートするには、Google デベロッパー ドキュメントの翻訳のベスト プラクティスに従って、文章を短く明確にしてください。
- 慣用句、ユーモア、または文化特有の言及は避け、中立的で包括的な言語を優先します。

## 出力定義

- 期待される結果の形式、構造、および場所を指定します (例: 「以下のテンプレートを使用して `docs/adr/adr-XXXX.md` を作成します」)。
- 成功基準と失敗トリガーを組み込むことで、Copilot がいつ停止または再試行するかを判断できるようになります。
- プロンプトの実行後にレビュー担当者が実行できる検証手順 (手動チェック、自動コマンド、受け入れ基準リストなど) を提供します。

## 例と再利用可能な資産

- プロンプトが生成または従うべき良い例/悪い例またはスキャフォールディング (Markdown テンプレート、JSON スタブ) を埋め込みます。
- プロンプトを自己完結型に保つために、参照テーブル（機能、ステータスコード、ロールの説明）をインラインで維持します。上流のリソースが変更された場合は、これらのテーブルを更新します。
- 長いガイダンスを重複して記載するのではなく、信頼できるドキュメントにリンクしてください。

## 品質保証チェックリスト

- [ ] Frontmatter フィールドは完全かつ正確で、最小限の権限しか与えられていません。
- [ ] 入力には、プレースホルダー、デフォルトの動作、フォールバックが含まれます。
- [ ] ワークフローは、準備、実行、後処理を隙間なくカバーします。
- [ ] 出力の期待には、フォーマットと保存の詳細が含まれます。
- [ ] 検証手順は実行可能です (コマンド、差分チェック、レビュー プロンプト)。
- [ ] プロンプトによって参照されるセキュリティ、コンプライアンス、およびプライバシー ポリシーは最新のものです。
- [ ] 代表的なシナリオを使用して、VS Code (`Chat: Run Prompt`) で Prompt が正常に実行されます。

## メンテナンスガイダンス

- バージョン管理は、影響を受けるコードの横にプロンプ​​トを表示します。依存関係、ツール、またはレビュー プロセスが変更されたときに更新します。
- ツール リスト、モデル要件、およびリンクされたドキュメントが有効なままであることを確認するために、定期的にプロンプ​​トを確認します。
- 他のリポジトリと調整する: プロンプトが広く有用であることが判明した場合は、共通のガイダンスを説明ファイルまたは共有プロンプト パックに抽出します。

## 追加リソース

- [Prompt Files Documentation](https://code.visualstudio.com/docs/copilot/customization/prompt-files#_prompt-file-format)
- [Awesome Copilot Prompt Files](https://github.com/github/awesome-copilot/tree/main/prompts)
- [Tool Configuration](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_agent-mode-tools)
